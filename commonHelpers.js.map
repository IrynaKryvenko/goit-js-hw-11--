{"version":3,"file":"commonHelpers.js","sources":["../src/js/apiService.js","../src/js/renderPhotosList.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getPhoto(value, page) {\n  const BASE_URL = 'https://pixabay.com/api/?';\n  const params = {\n    key: '36655990-0724db180fb71d9be8c2c1bf3',\n    q: value,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page,\n  };\n  const url = `${BASE_URL}`;\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}","function imageTemplate({\n  webformatURL,\n  tags,\n  views,\n  likes,\n  comments,\n  downloads,\n  largeImageURL,\n}) {\n  return `<li class=\"image-item\">\n  <a class=\"image-link\" href=\"${largeImageURL}\">\n  <img loading = \"lazy\" src=\"${webformatURL}\" alt=\"${tags}\" width =\"300\" height=\"200\" ></a>\n  <div class=\"tex-container\">\n  <p class=\"image-text\">Likes <span class=\"span-text\">${likes}</span></p>\n  <p class=\"image-text\">Views <span class=\"span-text\">${views}</span></p>\n  <p class=\"image-text\">Comments <span class=\"span-text\">${comments}</span></p>\n  <p class=\"image-text\">Downloads <span class=\"span-text\">${downloads}</span></p>\n  </div>\n</li>`;\n}\nexport function imageTemplates(arr) {\n  return arr.map(imageTemplate).join('');\n}\n\nexport function loader() {\n  return `<span class=\"loader\">Loading</span>`;\n}\n\nexport function error() {\n  return `<span class=\"error\">ERROR</span>`;\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getPhoto } from './js/apiService';\nimport { imageTemplates } from './js/renderPhotosList';\nimport { loader } from './js/renderPhotosList';\nimport { error } from './js/renderPhotosList';\n\nconst imageList = document.querySelector('.image-list');\nconst form = document.querySelector('.form-search');\nform.addEventListener('submit', handlerSubmit);\nconst loadButton = document.querySelector('.load-more');\nloadButton.addEventListener('click', loadMore);\n\n\nlet currentPage = 1;\nlet query = '';\nlet maxPage = 0;\nconst pageSize = 15;\n\nasync function handlerSubmit(event) {\n  event.preventDefault();\n\n  query = event.target.elements.search.value.trim();\n\n  if (!query) return;\n\n  imageList.innerHTML = '';\n  currentPage = 1;\n\n  imageList.insertAdjacentHTML('afterbegin', loader());\n\n  try {\n    const data = await getPhoto(query, currentPage);\n\n    maxPage = Math.ceil(data.totalHits / pageSize);\n\n    if (!data.hits.length) {\n      imageList.innerHTML = '';\n      iziToast.show({\n        position: 'topRight',\n        color: 'red',\n        messageColor: 'black',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      const markup = imageTemplates(data.hits);\n      checkBtnStatus();\n      imageList.innerHTML = markup;\n      simpleLightBox();\n    }\n  } catch {\n    imageList.insertAdjacentHTML('afterbegin', error());\n  }\n\n  event.target.reset();\n}\n\nasync function loadMore() {\n  currentPage += 1;\n\n  imageList.insertAdjacentHTML('afterend', loader());\n  const loaderSpan = document.querySelector('.loader');\n\n  const data = await getPhoto(query, currentPage);\n\n  loaderSpan.remove();\n\n  checkBtnStatus();\n\n  const markup = imageTemplates(data.hits);\n  imageList.insertAdjacentHTML('beforeend', markup);\n\n  lightScroll();\n  simpleLightBox();\n}\n\nfunction simpleLightBox() {\n  const lightbox = new SimpleLightbox('.image-link', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n}\n\nfunction checkBtnStatus() {\n  if (currentPage >= maxPage) {\n    loadButton.classList.add('hidden');\n    iziToast.show({\n      iconUrl: './img/info_icon.svg',\n      position: 'topRight',\n      color: 'blue',\n      messageColor: 'black',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {\n    loadButton.classList.remove('hidden');\n  }\n}\n\nfunction lightScroll() {\n  const height = imageList.firstChild.getBoundingClientRect().height;\n  scrollBy({\n    top: height * 3,\n    behavior: 'smooth',\n  });\n}"],"names":["getPhoto","value","page","BASE_URL","params","url","axios","imageTemplate","webformatURL","tags","views","likes","comments","downloads","largeImageURL","imageTemplates","arr","loader","error","imageList","form","handlerSubmit","loadButton","loadMore","currentPage","query","maxPage","pageSize","event","data","iziToast","markup","checkBtnStatus","simpleLightBox","loaderSpan","lightScroll","SimpleLightbox","height"],"mappings":"owBAEO,eAAeA,EAASC,EAAOC,EAAM,CAC1C,MAAMC,EAAW,4BACXC,EAAS,CACb,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACJ,EACQG,EAAM,GAAGF,CAAQ,GAGvB,OADY,MAAMG,EAAM,IAAID,EAAK,CAAE,OAAAD,CAAM,CAAE,GAChC,IACb,CCjBA,SAASG,EAAc,CACrB,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,EACA,cAAAC,CACF,EAAG,CACD,MAAO;AAAA,gCACuBA,CAAa;AAAA,+BACdN,CAAY,UAAUC,CAAI;AAAA;AAAA,wDAEDE,CAAK;AAAA,wDACLD,CAAK;AAAA,2DACFE,CAAQ;AAAA,4DACPC,CAAS;AAAA;AAAA,MAGrE,CACO,SAASE,EAAeC,EAAK,CAClC,OAAOA,EAAI,IAAIT,CAAa,EAAE,KAAK,EAAE,CACvC,CAEO,SAASU,GAAS,CACvB,MAAO,qCACT,CAEO,SAASC,GAAQ,CACtB,MAAO,kCACT,CCpBA,MAAMC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAO,SAAS,cAAc,cAAc,EAClDA,EAAK,iBAAiB,SAAUC,CAAa,EAC7C,MAAMC,EAAa,SAAS,cAAc,YAAY,EACtDA,EAAW,iBAAiB,QAASC,CAAQ,EAG7C,IAAIC,EAAc,EACdC,EAAQ,GACRC,EAAU,EACd,MAAMC,EAAW,GAEjB,eAAeN,EAAcO,EAAO,CAKlC,GAJAA,EAAM,eAAc,EAEpBH,EAAQG,EAAM,OAAO,SAAS,OAAO,MAAM,OAEvC,EAACH,EAEL,CAAAN,EAAU,UAAY,GACtBK,EAAc,EAEdL,EAAU,mBAAmB,aAAcF,EAAQ,CAAA,EAEnD,GAAI,CACF,MAAMY,EAAO,MAAM7B,EAASyB,EAAOD,CAAW,EAI9C,GAFAE,EAAU,KAAK,KAAKG,EAAK,UAAYF,CAAQ,EAEzC,CAACE,EAAK,KAAK,OACbV,EAAU,UAAY,GACtBW,EAAS,KAAK,CACZ,SAAU,WACV,MAAO,MACP,aAAc,QACd,QACE,0EACV,CAAO,MACI,CACL,MAAMC,EAAShB,EAAec,EAAK,IAAI,EACvCG,IACAb,EAAU,UAAYY,EACtBE,GACD,CACL,MAAU,CACNd,EAAU,mBAAmB,aAAcD,EAAO,CAAA,CACnD,CAEDU,EAAM,OAAO,QACf,CAEA,eAAeL,GAAW,CACxBC,GAAe,EAEfL,EAAU,mBAAmB,WAAYF,EAAQ,CAAA,EACjD,MAAMiB,EAAa,SAAS,cAAc,SAAS,EAE7CL,EAAO,MAAM7B,EAASyB,EAAOD,CAAW,EAE9CU,EAAW,OAAM,EAEjBF,IAEA,MAAMD,EAAShB,EAAec,EAAK,IAAI,EACvCV,EAAU,mBAAmB,YAAaY,CAAM,EAEhDI,IACAF,GACF,CAEA,SAASA,GAAiB,CACP,IAAIG,EAAe,cAAe,CACjD,aAAc,MACd,aAAc,GAClB,CAAG,EACQ,QAAO,CAClB,CAEA,SAASJ,GAAiB,CACpBR,GAAeE,GACjBJ,EAAW,UAAU,IAAI,QAAQ,EACjCQ,EAAS,KAAK,CACZ,QAAS,sBACT,SAAU,WACV,MAAO,OACP,aAAc,QACd,QAAS,4DACf,CAAK,GAEDR,EAAW,UAAU,OAAO,QAAQ,CAExC,CAEA,SAASa,GAAc,CACrB,MAAME,EAASlB,EAAU,WAAW,sBAAqB,EAAG,OAC5D,SAAS,CACP,IAAKkB,EAAS,EACd,SAAU,QACd,CAAG,CACH"}